<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>公众号授权2</title>
    <script>
        function myfunction(){


            function GetQueryString(name) {
                var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)","i");
                var r = window.location.search.substr(1).match(reg);
                if (r!=null) return (r[2]); return null;
            }

            alert(GetQueryString("code"));

            var code = GetQueryString("code");

            var url="http://192.168.0.107:8088/api/account/getPublicUserInfo?code="+code;
            var httpRequest = new XMLHttpRequest();//第一步：建立所需的对象
            httpRequest.open('GET', url, true);//第二步：打开连接  将请求参数写在url中
            httpRequest.send();//第三步：发送请求  将请求参数写在URL中

        }
    </script>
</head>
<body onload="myfunction()">
<h1>公众号授权test2</h1>
</body>
</html>
