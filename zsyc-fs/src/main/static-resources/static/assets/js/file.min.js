!function(){"use strict";function t(t){t?(f[0]=f[16]=f[1]=f[2]=f[3]=f[4]=f[5]=f[6]=f[7]=f[8]=f[9]=f[10]=f[11]=f[12]=f[13]=f[14]=f[15]=0,this.blocks=f):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.h0=1732584193,this.h1=4023233417,this.h2=2562383102,this.h3=271733878,this.h4=3285377520,this.block=this.start=this.bytes=0,this.finalized=this.hashed=!1,this.first=!0}var i="object"==typeof window?window:{},e=!i.JS_SHA1_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node;e&&(i=global);var r=!i.JS_SHA1_NO_COMMON_JS&&"object"==typeof module&&module.exports,h="function"==typeof define&&define.amd,s="0123456789abcdef".split(""),n=[-2147483648,8388608,32768,128],o=[24,16,8,0],a=["hex","array","digest","arrayBuffer"],f=[],u=function(i){return function(e){return new t((!0)).update(e)[i]()}},c=function(){var i=u("hex");e&&(i=d(i)),i.create=function(){return new t},i.update=function(t){return i.create().update(t)};for(var r=0;r<a.length;++r){var h=a[r];i[h]=u(h)}return i},d=function(t){var i=require("crypto"),e=require("buffer").Buffer,r=function(r){if("string"==typeof r)return i.createHash("sha1").update(r,"utf8").digest("hex");if(r.constructor===ArrayBuffer)r=new Uint8Array(r);else if(void 0===r.length)return t(r);return i.createHash("sha1").update(new e(r)).digest("hex")};return r};t.prototype.update=function(t){if(!this.finalized){var e="string"!=typeof t;e&&t.constructor===i.ArrayBuffer&&(t=new Uint8Array(t));for(var r,h,s=0,n=t.length||0,a=this.blocks;s<n;){if(this.hashed&&(this.hashed=!1,a[0]=this.block,a[16]=a[1]=a[2]=a[3]=a[4]=a[5]=a[6]=a[7]=a[8]=a[9]=a[10]=a[11]=a[12]=a[13]=a[14]=a[15]=0),e)for(h=this.start;s<n&&h<64;++s)a[h>>2]|=t[s]<<o[3&h++];else for(h=this.start;s<n&&h<64;++s)r=t.charCodeAt(s),r<128?a[h>>2]|=r<<o[3&h++]:r<2048?(a[h>>2]|=(192|r>>6)<<o[3&h++],a[h>>2]|=(128|63&r)<<o[3&h++]):r<55296||r>=57344?(a[h>>2]|=(224|r>>12)<<o[3&h++],a[h>>2]|=(128|r>>6&63)<<o[3&h++],a[h>>2]|=(128|63&r)<<o[3&h++]):(r=65536+((1023&r)<<10|1023&t.charCodeAt(++s)),a[h>>2]|=(240|r>>18)<<o[3&h++],a[h>>2]|=(128|r>>12&63)<<o[3&h++],a[h>>2]|=(128|r>>6&63)<<o[3&h++],a[h>>2]|=(128|63&r)<<o[3&h++]);this.lastByteIndex=h,this.bytes+=h-this.start,h>=64?(this.block=a[16],this.start=h-64,this.hash(),this.hashed=!0):this.start=h}return this}},t.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var t=this.blocks,i=this.lastByteIndex;t[16]=this.block,t[i>>2]|=n[3&i],this.block=t[16],i>=56&&(this.hashed||this.hash(),t[0]=this.block,t[16]=t[1]=t[2]=t[3]=t[4]=t[5]=t[6]=t[7]=t[8]=t[9]=t[10]=t[11]=t[12]=t[13]=t[14]=t[15]=0),t[15]=this.bytes<<3,this.hash()}},t.prototype.hash=function(){var t,i,e,r=this.h0,h=this.h1,s=this.h2,n=this.h3,o=this.h4,a=this.blocks;for(i=16;i<80;++i)e=a[i-3]^a[i-8]^a[i-14]^a[i-16],a[i]=e<<1|e>>>31;for(i=0;i<20;i+=5)t=h&s|~h&n,e=r<<5|r>>>27,o=e+t+o+1518500249+a[i]<<0,h=h<<30|h>>>2,t=r&h|~r&s,e=o<<5|o>>>27,n=e+t+n+1518500249+a[i+1]<<0,r=r<<30|r>>>2,t=o&r|~o&h,e=n<<5|n>>>27,s=e+t+s+1518500249+a[i+2]<<0,o=o<<30|o>>>2,t=n&o|~n&r,e=s<<5|s>>>27,h=e+t+h+1518500249+a[i+3]<<0,n=n<<30|n>>>2,t=s&n|~s&o,e=h<<5|h>>>27,r=e+t+r+1518500249+a[i+4]<<0,s=s<<30|s>>>2;for(;i<40;i+=5)t=h^s^n,e=r<<5|r>>>27,o=e+t+o+1859775393+a[i]<<0,h=h<<30|h>>>2,t=r^h^s,e=o<<5|o>>>27,n=e+t+n+1859775393+a[i+1]<<0,r=r<<30|r>>>2,t=o^r^h,e=n<<5|n>>>27,s=e+t+s+1859775393+a[i+2]<<0,o=o<<30|o>>>2,t=n^o^r,e=s<<5|s>>>27,h=e+t+h+1859775393+a[i+3]<<0,n=n<<30|n>>>2,t=s^n^o,e=h<<5|h>>>27,r=e+t+r+1859775393+a[i+4]<<0,s=s<<30|s>>>2;for(;i<60;i+=5)t=h&s|h&n|s&n,e=r<<5|r>>>27,o=e+t+o-1894007588+a[i]<<0,h=h<<30|h>>>2,t=r&h|r&s|h&s,e=o<<5|o>>>27,n=e+t+n-1894007588+a[i+1]<<0,r=r<<30|r>>>2,t=o&r|o&h|r&h,e=n<<5|n>>>27,s=e+t+s-1894007588+a[i+2]<<0,o=o<<30|o>>>2,t=n&o|n&r|o&r,e=s<<5|s>>>27,h=e+t+h-1894007588+a[i+3]<<0,n=n<<30|n>>>2,t=s&n|s&o|n&o,e=h<<5|h>>>27,r=e+t+r-1894007588+a[i+4]<<0,s=s<<30|s>>>2;for(;i<80;i+=5)t=h^s^n,e=r<<5|r>>>27,o=e+t+o-899497514+a[i]<<0,h=h<<30|h>>>2,t=r^h^s,e=o<<5|o>>>27,n=e+t+n-899497514+a[i+1]<<0,r=r<<30|r>>>2,t=o^r^h,e=n<<5|n>>>27,s=e+t+s-899497514+a[i+2]<<0,o=o<<30|o>>>2,t=n^o^r,e=s<<5|s>>>27,h=e+t+h-899497514+a[i+3]<<0,n=n<<30|n>>>2,t=s^n^o,e=h<<5|h>>>27,r=e+t+r-899497514+a[i+4]<<0,s=s<<30|s>>>2;this.h0=this.h0+r<<0,this.h1=this.h1+h<<0,this.h2=this.h2+s<<0,this.h3=this.h3+n<<0,this.h4=this.h4+o<<0},t.prototype.hex=function(){this.finalize();var t=this.h0,i=this.h1,e=this.h2,r=this.h3,h=this.h4;return s[t>>28&15]+s[t>>24&15]+s[t>>20&15]+s[t>>16&15]+s[t>>12&15]+s[t>>8&15]+s[t>>4&15]+s[15&t]+s[i>>28&15]+s[i>>24&15]+s[i>>20&15]+s[i>>16&15]+s[i>>12&15]+s[i>>8&15]+s[i>>4&15]+s[15&i]+s[e>>28&15]+s[e>>24&15]+s[e>>20&15]+s[e>>16&15]+s[e>>12&15]+s[e>>8&15]+s[e>>4&15]+s[15&e]+s[r>>28&15]+s[r>>24&15]+s[r>>20&15]+s[r>>16&15]+s[r>>12&15]+s[r>>8&15]+s[r>>4&15]+s[15&r]+s[h>>28&15]+s[h>>24&15]+s[h>>20&15]+s[h>>16&15]+s[h>>12&15]+s[h>>8&15]+s[h>>4&15]+s[15&h]},t.prototype.toString=t.prototype.hex,t.prototype.digest=function(){this.finalize();var t=this.h0,i=this.h1,e=this.h2,r=this.h3,h=this.h4;return[t>>24&255,t>>16&255,t>>8&255,255&t,i>>24&255,i>>16&255,i>>8&255,255&i,e>>24&255,e>>16&255,e>>8&255,255&e,r>>24&255,r>>16&255,r>>8&255,255&r,h>>24&255,h>>16&255,h>>8&255,255&h]},t.prototype.array=t.prototype.digest,t.prototype.arrayBuffer=function(){this.finalize();var t=new ArrayBuffer(20),i=new DataView(t);return i.setUint32(0,this.h0),i.setUint32(4,this.h1),i.setUint32(8,this.h2),i.setUint32(12,this.h3),i.setUint32(16,this.h4),t};var p=c();r?module.exports=p:(i.sha1=p,h&&define(function(){return p}))}(),!function(t){"use strict";var i={image:{path:""},file:{path:"/file"}},e=function(i,e){var r=new FileReader,h=new Promise(function(h,s){r.addEventListener("load",function(){var s=sha1(r.result);fetch(t.uploadHost+e.path+"/exist?code="+s.toUpperCase()).then(function(t){return t.json()}).then(function(r){if(r.bizContent&&r.bizContent.id)return h(r);var s=new FormData;return s.append("file",i),fetch(t.uploadHost+e.path+"/upload",{method:"POST",body:s}).then(function(t){return t.json()}).then(function(t){return h(t)})})})});return r.readAsArrayBuffer(i),h};t.fileUpload=function(r,h){return e(r,i[h||"image"]).then(function(i){return i.origin=t.uploadHost+"/origin/"+i.fingerprint,i.small=t.uploadHost+"/small/"+i.fingerprint,i.middle=t.uploadHost+"/middle/"+i.fingerprint,i})}}(window);
//# sourceMappingURL=file.min.js.map
